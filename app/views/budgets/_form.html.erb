<%= form_for(@budget) do |f| %>
  <%= render 'shared/error_messages', :object => f.object %>

  <div class="field" <%= display_if(params[:category].nil?) %>>
    <% if  params[:category].nil? %>
      <%= f.label :category %><br />
      <%= f.select :category, Transaction::CATEGORIES %>
    <% else %>
      <%= f.label :category %><br />
      <%= f.select :category, Transaction::CATEGORIES, :selected => (params[:category] unless params[:category].nil?) %>
    <% end %>
  </div>

  <div class="field radios">
    <div>When will this happen?</div>

    <%= radio_button_tag "period", "once", true %>
    <%= label_tag "period_once", "Once" %>

    <%= radio_button_tag "period", "monthly" %>
    <%= label_tag "period_monthly", "Every month" %>

    <%= radio_button_tag "period", "few_month" %>
    <%= label_tag "period_few_month", "Every few month" %>
  </div>

  <div class="field">
    <%= f.label :amount %>
    <%= f.text_field :amount %>
  </div>
  <div class="period hidden">
    every <%= select_tag :period, options_for_select(period_select, @budget.period) %>
  </div>
  <div class="start">
    <% if !@budget.new_record? && !@budget.start.nil? %>
      <div class="hidden" id="budget_year"><%= @budget.start.year %></div>
      <div class="hidden" id="budget_month"><%= @budget.start.month %></div>
    <% end %>
    My next is in <%= f.date_select :start, :use_short_month => true,
                                            :discard_day => true,
                                            :start_year => Time.now.year %>
  </div>
  <div class="field hidden"><%= f.text_field :period %></div>

  <br />
  <div class="actions"><%= f.submit %></div>
<% end %>
